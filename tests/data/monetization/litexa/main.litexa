launch
  if inSkillProductBought(context, 'MyProduct')
    say "You're entitled to use MyProduct."
    -> listen
  else
    say "You're not entitled to use MyProduct."
    -> listen

listen
  when "buy"
    buyInSkillProduct "MyProduct"

  when "cancel"
    cancelInSkillProduct "MyProduct"

global
  when Connections.Response "Buy"
    switch $purchaseResult
      == "ACCEPTED" then
        say "Looks like you now own $referenceName."
      == "DECLINED" then
        say "Looks like you opted not to purchase $referenceName. Maybe next time!"

  when Connections.Response "Cancel"
    switch $purchaseResult
      == "ACCEPTED" then
        say "Looks like you've canceled $referenceName."
      == "DECLINED" then
        say "Looks like you opted out of cancelling $referenceName."

  when AMAZON.HelpIntent
    say "Please say buy or cancel."
    -> listen

  otherwise
    say "I'm sorry, I didn't understand that."
    END
